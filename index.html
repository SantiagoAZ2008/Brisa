<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brisa - Apoyo Emocional</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #2b0d12;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .fade-in { animation: fade 1.2s ease-in-out; }
    @keyframes fade {
      from { opacity: 0; transform: translateY(20px);} 
      to { opacity: 1; transform: translateY(0);} 
    }

    .box {
      background: rgba(255,255,255,0.08);
      padding: 35px;
      width: 350px;
      border-radius: 15px;
      backdrop-filter: blur(6px);
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      text-align: center;
    }

    input, select {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: none;
      outline: none;
      margin-top: 8px;
      background: rgba(255,255,255,0.15);
      color: white;
    }

    button {
      width: 100%;
      margin-top: 18px;
      padding: 12px;
      background: #5c0f19;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 16px;
      border-radius: 8px;
      transition: 0.3s;
    }

    button:hover { background: #7a1321; }

    .error { color: #ffb3b3; font-size: 14px; display: none; }

    #home, #register, #emotionMenu, #game, #saved {
      display: none;
    }

    .menu-btn { margin-top: 15px; width: 80%; }
  </style>
</head>

<body>

  <!-- LOGIN -->
  <div class="box fade-in" id="login">
    <h2>Brisa</h2>
    <p>Inicia sesión</p>

    <input type="text" id="loginUser" placeholder="Usuario" />
    <input type="password" id="loginPass" placeholder="Contraseña" />
    <button onclick="login()">Ingresar</button>

    <p class="error" id="loginError">Datos incorrectos</p>

    <button onclick="showRegister()" class="menu-btn">Crear cuenta</button>
  </div>

  <!-- REGISTER -->
  <div class="box fade-in" id="register">
    <h2>Brisa</h2>
    <p>Crear cuenta</p>

    <input type="text" id="regUser" placeholder="Nuevo usuario" />
    <input type="password" id="regPass" placeholder="Nueva contraseña" />

    <button onclick="registerUser()">Registrar</button>

    <p class="error" id="regError">Complete todos los campos</p>

    <button onclick="showLogin()" class="menu-btn">Volver</button>
  </div>

  <!-- HOME MENU -->
  <div class="box fade-in" id="home">
    <h1>Hola <span id="userName"></span></h1>

    <button class="menu-btn" onclick="showEmotionMenu()">Registrar emoción</button>
    <button class="menu-btn" onclick="showGame()">Jugar</button>
    <button class="menu-btn" onclick="showSaved()">Historial</button>
    <button class="menu-btn" onclick="logout()">Cerrar sesión</button>
  </div>

  <!-- EMOTION -->
  <div class="box fade-in" id="emotionMenu">
    <h2>¿Cómo te sientes?</h2>

    <select id="emotion">
      <option value="feliz">Feliz</option>
      <option value="triste">Triste</option>
      <option value="estresado">Estresado</option>
      <option value="motivado">Motivado</option>
      <option value="cansado">Cansado</option>
    </select>

    <button onclick="saveEmotion()">Guardar</button>
    <p id="savedMsg"></p>

    <button class="menu-btn" onclick="returnHome()">Volver</button>
  </div>

  <!-- GAME -->
  <div class="box fade-in" id="game">
    <h2>Mini juego</h2>
    <p>Haz clic lo más rápido posible</p>

    <button onclick="clickGame()">Clic aquí</button>
    <p id="gameScore">Puntaje: 0</p>

    <button class="menu-btn" onclick="returnHome()">Volver</button>
  </div>

  <!-- SAVED EMOTIONS -->
  <div class="box fade-in" id="saved">
    <h2>Historial emocional</h2>
    <p id="savedList"></p>

    <button class="menu-btn" onclick="returnHome()">Volver</button>
  </div>

  <script>
    function showRegister(){
      login.style.display = "none";
      register.style.display = "block";
    }

    function showLogin(){
      register.style.display = "none";
      login.style.display = "block";
    }

    function registerUser(){
      let u = regUser.value;
      let p = regPass.value;

      if(u.length < 3 || p.length < 3){
        regError.style.display = "block";
        return;
      }

      localStorage.setItem("brisaUser", u);
      localStorage.setItem("brisaPass", p);
      showLogin();
    }

    function login(){
      let u = loginUser.value;
      let p = loginPass.value;
      let su = localStorage.getItem("brisaUser");
      let sp = localStorage.getItem("brisaPass");

      if(u === su && p === sp){
        login.style.display = "none";
        home.style.display = "block";
        userName.innerText = u;
      } else {
        loginError.style.display = "block";
      }
    }

    function showEmotionMenu(){
      home.style.display = "none";
      emotionMenu.style.display = "block";
    }

    function showGame(){
      home.style.display = "none";
      game.style.display = "block";
    }

    function showSaved(){
      home.style.display = "none";
      saved.style.display = "block";

      let list = JSON.parse(localStorage.getItem("brisaEmotions")) || [];
      savedList.innerHTML = list.join("<br>");
    }

    function returnHome(){
      emotionMenu.style.display = "none";
      game.style.display = "none";
      saved.style.display = "none";
      home.style.display = "block";
    }

    function saveEmotion(){
      let emotionValue = emotion.value;
      let list = JSON.parse(localStorage.getItem("brisaEmotions")) || [];

      list.push(emotionValue + " - " + new Date().toLocaleString());
      localStorage.setItem("brisaEmotions", JSON.stringify(list));

      savedMsg.innerText = "Estado guardado correctamente";
    }

    let score = 0;
    function clickGame(){
      score++;
      gameScore.innerText = "Puntaje: " + score;
    }

    function logout(){
      home.style.display = "none";
      login.style.display = "block";
    }
  </script>

</body>
</html>
